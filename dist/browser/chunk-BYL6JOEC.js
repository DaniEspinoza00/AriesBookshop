import{c as P,d as N,f as F,h as W,i as z,s as H,t as j,x as $}from"./chunk-IPDX5YGB.js";import{b as L,h as X}from"./chunk-AQEJQGH2.js";import{Ab as p,B as g,Cb as C,Db as V,Eb as D,Ka as M,Oa as l,W as u,X as R,_b as U,bc as O,cb as v,cc as B,da as E,ea as y,eb as c,jb as a,kb as n,lb as I,na as S,oa as k,ob as b,q as x,qb as w,t as f,vb as d,wb as h,xb as A}from"./chunk-7LFF63BH.js";var Q=(()=>{let t=class t{constructor(e){this.http=e,this.bookList=[],this.urlApi=X.baseUrl,this.limit="books?_limit=100",this.books="books"}getBooks(){return this.http.get(`${this.urlApi}/${this.limit}`).pipe(g(this.handlerError))}getBook(e){return this.http.get(`${this.urlApi}/${this.books}/${e}`).pipe(g(this.handlerError))}getBooksBySearch(e){return this.getBooks().pipe(f(i=>i.filter(s=>{let _=s.title.toLowerCase(),o=e.toLowerCase();return _.includes(o)})))}getBooksByAuthor(e){return this.getBooks().pipe(f(i=>i.filter(s=>s.authors.toLowerCase().includes(e.toLowerCase()))))}getBooksByGenre(e){return this.getBooks().pipe(f(i=>i.filter(s=>s.genres.split(",").map(o=>o.trim().toLowerCase()).includes(e.toLowerCase()))))}handlerError(e){return e.status===0?console.log("Error detected",e.error):console.log("Backend status code",e.status,e.error),x(()=>new Error("Something happened, please try again"))}};t.\u0275fac=function(i){return new(i||t)(S(L))},t.\u0275prov=E({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();var G=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=R({type:t}),t.\u0275inj=y({imports:[W,z]});let r=t;return r})();function Z(r,t){if(r&1&&(a(0,"option",6),d(1),n()),r&2){let m=t.$implicit;c("value",m),l(),h(m)}}function q(r,t){if(r&1&&(a(0,"option",7),d(1),n()),r&2){let m=t.$implicit;c("value",m),l(),h(m)}}var Nt=(()=>{let t=class t{constructor(){this.bookList=[],this.genreList=[],this.authorsList=[],this.router=k(P),this.BooksApiServiceService=k(Q)}ngOnInit(){this.getGenres()}filterByGenre(e){let s=e.target.value;s&&this.router.navigate(["/category",s])}filterByAuthors(e){let s=e.target.value;s&&this.router.navigate(["/author",s])}getGenres(){this.BooksApiServiceService.getBooks().subscribe({next:e=>{if(this.bookList=e,this.bookList){let i=new Set;this.bookList.forEach(s=>{s.genres.split(",").forEach(o=>i.add(o.trim()))}),this.genreList=Array.from(i),this.getAutoresHttp()}},error:e=>{console.log(e)}})}getAutoresHttp(){let e=this.bookList?.map(i=>i.authors);this.authorsList=[...new Set(e)]}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=u({type:t,selectors:[["app-filters"]],standalone:!0,features:[p],decls:17,vars:2,consts:[[1,"filters-container"],[1,"select-container"],[1,"select-box",3,"change"],["value","",1,"select-box-header"],["class","options",3,"value",4,"ngFor","ngForOf"],[3,"value",4,"ngFor","ngForOf"],[1,"options",3,"value"],[3,"value"]],template:function(i,s){i&1&&(a(0,"div",0)(1,"div",1)(2,"p"),d(3,"Filter by Genres"),n(),a(4,"select",2),b("change",function(o){return s.filterByGenre(o)}),a(5,"option",3)(6,"p"),d(7,"All genres"),n()(),v(8,Z,2,2,"option",4),n()(),a(9,"div",1)(10,"p"),d(11,"Filter by Authors"),n(),a(12,"select",2),b("change",function(o){return s.filterByAuthors(o)}),a(13,"option",3)(14,"p"),d(15,"All authors"),n()(),v(16,q,2,2,"option",5),n()()()),i&2&&(l(8),c("ngForOf",s.genreList),l(8),c("ngForOf",s.authorsList))},dependencies:[$,H,j,G,U],styles:[".select-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:80%}.select-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:20px}.select-box[_ngcontent-%COMP%]{border:none;padding:.5rem 0;color:#e9e3e3dc;background-color:#432f2f;font-size:.8rem}.select-box-header[_ngcontent-%COMP%]{text-align:center}.select-box-header[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{font-size:1rem}.contenedor[_ngcontent-%COMP%]{width:70%}@media screen and (max-width:767px){.filters-container[_ngcontent-%COMP%]{width:70%}}"]});let r=t;return r})();var Y=r=>["/product",r],jt=(()=>{let t=class t{ngOnInit(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=u({type:t,selectors:[["app-book-card"]],inputs:{item:"item",booklist:"booklist"},standalone:!0,features:[p],decls:9,vars:10,consts:[[1,"product",3,"routerLink"],[1,"card-product","d-flex","flex-column","align-items-center"],[1,"prod-img",3,"src","alt"],[1,"card-body","d-flex","flex-column","container-details"],[1,"card-titles","mb-auto"],[1,"card-price","mt-auto","text-center"]],template:function(i,s){i&1&&(a(0,"a",0)(1,"div",1),I(2,"img",2),a(3,"div",3)(4,"p",4),d(5),n(),a(6,"p",5),d(7),V(8,"number"),n()()()()),i&2&&(c("routerLink",C(8,Y,s.item.id)),l(2),w("alt",s.item.title),c("src",s.item.image_url,M),l(3),h(s.item.title),l(2),A("$ ",D(8,5,s.item.booklist==null?null:s.item.booklist.price,"1.2-2"),""))},dependencies:[F,N,B,O]});let r=t;return r})();export{Q as a,Nt as b,jt as c};
